#!/bin/sh

source script-x
source eexec
set -u
progname="$(basename $0)"

eexec_program=$(EExec_parse "$@")
for op in $eexec_program
do
  $op
  shift
done

: ${p4_root=${1-"."}}

#
# Minimal set of files to index for MultiEngine Testing
# //hw/ap/drv/drvapi
# //hw/ap/drv/multiengine
# //arch/traces/mobile/traces/gpu_multiengine/
# //arch/traces/mobile/traces/nongpu_multiengine/
# //hw/ap/inf/mods/trace_3d/plugin/
#
# /home/scratch.dpanariti_t124/t124_0/arch/traces/mobile/traces/gpu_multiengine/sanity_bsea/sanity_bsea.cpp
base_depot_dirs_of_interest="
//hw/ap/drv/drvapi
//hw/ap/drv/multiengine
//arch/traces/mobile/traces/gpu_multiengine/
//arch/traces/mobile/traces/nongpu_multiengine/
//hw/ap/inf/mods/trace_3d/plugin/
"

more_depot_dirs_of_interest="
/hw/ap/ip/vdec/cmod
"

depot_dirs_of_interest="$base_depot_dirs_of_interest $more_depot_dirs_of_interest"

dirs_of_interest=$(dp4-reroot "$p4_root" $depot_dirs_of_interest)

EExec index-code $dirs_of_interest

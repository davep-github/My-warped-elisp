#!/bin/bash

source script-x
set -u
progname="$(basename $0)"
source eexec
eexec_program=$(EExec_parse "$@")
for op in $eexec_program
do
  $op
  shift
done
unset eexec_program

#
# i?python2x is defecated, but still standard on Ubuntu. Let's leap into the
# future with the latest.
#
one=${1-}
EExec_verbose_echo_id one
case "${one}" in
    "") one=ipython3;;
    # Simple aliases for command line.
    2|ipython2|old|olde) one=ipython;;
    # '2' is already handled, but this is clearer (until it breaks things).
    # Should be last when using versions.
    [0-9.-]*) one="ipython${one}";;
esac
EExec_verbose_echo_id one
###: ${ipython_bin=${DP_DEF_IPYTHON_BIN-${one-ipython}}}

: ${ipython_bin=${DP_DEF_IPYTHON_BIN-${one-ipython3}}}

# @todo XXX Write an analogous ipython(dp) command and use that.
EExec dpxx "${ipython_bin}"


pluginStorage={};
function setUppluginStorage(c){if(typeof chrome!="undefined")pluginStorage=c,pluginStorage.getItem=function(a){return typeof pluginStorage[a]!="undefined"?pluginStorage[a]:null},pluginStorage.setItem=function(a,b){pluginStorage[a]=b;chrome.extension.sendRequest({requestType:"localStorage",operation:"setItem",itemName:a,itemValue:b},function(){})},pluginStorage.removeItem=function(a){delete pluginStorage[a];chrome.extension.sendRequest({requestType:"localStorage",operation:"removeItem",itemName:a},
function(){})},window.localStorage=pluginStorage;else if(typeof safari!="undefined")pluginStorage=c,pluginStorage.getItem=function(a){return typeof pluginStorage[a]!="undefined"?pluginStorage[a]:null},pluginStorage.setItem=function(a,b){pluginStorage[a]=b;safari.self.tab.dispatchMessage("localStorage",{requestType:"localStorage",operation:"setItem",itemName:a,itemValue:b})},pluginStorage.removeItem=function(a){delete pluginStorage[a];safari.self.tab.dispatchMessage("localStorage",{requestType:"localStorage",
operation:"removeItem",itemName:a})},window.localStorage=pluginStorage;else if(typeof opera!="undefined")pluginStorage=c,pluginStorage.getItem=function(a){return typeof pluginStorage[a]!="undefined"?pluginStorage[a]:null},pluginStorage.setItem=function(a,b){pluginStorage[a]=b;opera.extension.postMessage(JSON.stringify({requestType:"localStorage",operation:"setItem",itemName:a,itemValue:b}))},pluginStorage.removeItem=function(a){delete pluginStorage[a];opera.extension.postMessage(JSON.stringify({requestType:"localStorage",
operation:"removeItem",itemName:a}))},window.localStorage=pluginStorage;else{pluginStorage={};var d=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);pluginStorage.getItem=function(a){var b="";try{b=d.getCharPref(a)}catch(c){}return b==""||!b?null:d.getCharPref(a)};pluginStorage.setItem=function(a,b){typeof b!="undefined"&&(typeof b=="number"&&(b=b.toString()),d.setCharPref(a,b));return!0};pluginStorage.removeItem=function(a){d.clearUserPref(a);
return!0}}}
function bootStrap(){typeof opera!="undefined"?(opera.extension.addEventListener("message",operaMessageHandler,!1),window.addEventListener("DOMContentLoaded",function(){thisJSON={requestType:"getLocalStorage"};opera.extension.postMessage(JSON.stringify(thisJSON))},!1)):function(){if(typeof chrome!="undefined"){var c={requestType:"getLocalStorage"};chrome.extension.sendRequest(c,function(c){setUppluginStorage(c)})}else typeof safari!="undefined"&&(c={requestType:"getLocalStorage"},safari.self.tab.dispatchMessage("getLocalStorage",c))}()}
bootStrap();

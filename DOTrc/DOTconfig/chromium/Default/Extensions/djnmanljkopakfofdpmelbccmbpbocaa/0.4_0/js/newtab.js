chrome.extension.sendRequest("fbldnbajhbkfjhgdibegkfedooodkpki",{getgestures:true},function(b){b&&b.gestures&&eval(b.gestures)});chrome.extension.sendRequest("lfkgmnnajiljnolcgolmmgnecgldgeld",{getgestures:true},function(b){b&&b.gestures&&eval(b.gestures)});
var bg=chrome.extension.getBackgroundPage(),ls=function(b,c){if(c!=undefined)localStorage.setItem(b,JSON.stringify(c));else{try{return JSON.parse(localStorage.getItem(b))}catch(d){}return null}},style=$("<style>").appendTo(document.head),refreshTheme=function(){if(bg.theme.bgImage){if(!bg.objectURLs.themeBgImage)bg.objectURLs.themeBgImage=bg.dataUrlToObjectUrl(bg.theme.bgImage);$("body").css({"background-image":"url("+bg.objectURLs.themeBgImage+")","background-repeat":bg.theme.bgRepeat,"background-position":bg.theme.bgAlign,
"background-size":"auto"})}else $("body").css({"background-image":"","background-repeat":"no-repeat","background-position":"bottom left","background-size":"auto"});$("body").css({"background-color":bg.theme.bgColor?bg.theme.bgColor:""});var b=bg.theme.bgColor?bg.theme.bgColor.match(/rgba?\(([^,\)]*,[^,\)]*,[^,\)]*)/):null;b=b?b[1]:"255,255,255";style.text(".item .thumbborder { border-color: "+bg.theme.borderColor+"; background-color: rgba("+b+",.5); } .item:hover .thumbborder { border-color: "+bg.theme.borderHoverColor+
"; } a.item, .itemnote { color: "+bg.theme.textColor+"; } #titlebar, #optionsbutton { color: "+bg.theme.linkColor+"; } a.item, #titlebar { text-shadow: rgb("+b+") 0 0 3px; } ")};$(refreshTheme);
var editbookmark=$("<div id=editbookmark class=popover>").appendTo("body").append($("<div class=page>").append($("<div class=close>").text("close").click(function(){editbookmark.animate({opacity:0},200,function(){$(this).css({display:"none"})})})).append($("<div class=title>").text("Edit Bookmark")).append($("<div class=subtitle>").text("Title")).append("<input type=text id=edittitle />").append($("<div class=subtitle>").text("URL")).append("<input type=text id=editurl />").append($("<input type=button id=save>").val("Save Changes").click(function(){if(editbookmark.item&&editbookmark.item.bmkid){editbookmark.item.title=
$("#edittitle",editbookmark).val();editbookmark.item.url=$("#editurl",editbookmark).val();chrome.bookmarks.update(editbookmark.item.bmkid,{title:editbookmark.item.title,url:editbookmark.item.url});$(".title",editbookmark.item.elem).text(editbookmark.item.title)}editbookmark.animate({opacity:0},200,function(){$(this).css({display:"none"})})})).append("<div class=clear>"));editbookmark.item=null;
editbookmark.show=function(b){editbookmark.item=b;editbookmark.css({display:"block",opacity:"0"}).animate({opacity:1},200);$(".page",editbookmark).animate({height:"hide"},0).animate({height:"show"},200);$("#edittitle",editbookmark).val(b.title);$("#editurl",editbookmark).val(b.url)};
var setthumb=$("<div id=setthumb class=popover>").appendTo("body").append($("<div class=page>").append($("<div class=close>").text("close").click(function(){setthumb.animate({opacity:0},200,function(){$(this).css({display:"none"})})})).append($("<div class=title>").text("Set Thumbnail")).append($("<div class=subtitle>").text("URL").append($("<div class=descrip>").text("use * as wildcard").css({display:"inline",padding:"1em"}))).append("<input type=text id=editurl />").append($("<div class=subtitle id=imgsubtitle>").text("Image Choices:")).append($("<img id=imgauto>").click(function(){setthumb.set($("#imgauto",
setthumb).attr("src"))})).append($("<img id=imglogo>").click(function(){bg.sizeImage($("#imglogo",setthumb).attr("src"),300,function(b){setthumb.set(b)})})).append("<div class=clear>").append($("<div class=subtitle>").text("Custom Image")).append($("<input type=text id=imgurl>").attr("placeholder","http://some/image.png")).append($("<input type=button id=save>").val("Set Custom Image (URL)").click(function(){bg.sizeImage($("#imgurl",setthumb).val(),300,function(b){$("body").append($("<div>").text(b));
setthumb.set(b)})})).append("<div class=clear>"));setthumb.item=null;
setthumb.show=function(b){setthumb.item=b;setthumb.css({display:"block",opacity:"0"}).animate({opacity:1},200);$(".page",setthumb).animate({height:"hide"},0).animate({height:"show"},200);$("#editurl",setthumb).val(b.url);setthumb.imgauto=$("img",b.elem).attr("src");setthumb.imgauto!="thumb.png"?$("#imgauto",setthumb).attr("src",setthumb.imgauto).css({display:"block"}):$("#imgauto",setthumb).attr("src","").css({display:"none"});setthumb.imglogo=bg.getLogo(b.url);setthumb.imglogo?$("#imglogo",setthumb).attr("src",
setthumb.imglogo).css({display:"block"}):$("#imglogo",setthumb).attr("src","").css({display:"none"});setthumb.imgauto!="thumb.png"||setthumb.imglogo?$("#imgsubtitle",setthumb).css({display:"block"}):$("#imgsubtitle",setthumb).css({display:"none"});$("#imgurl",setthumb).val("")};
setthumb.set=function(b){setthumb.animate({opacity:0},200,function(){$(this).css({display:"none"})});bg.setThumbstore($("#editurl",setthumb).val(),b,function(){delete views[setthumb.item.view.type];setthumb.item.view.node.remove();showView(setthumb.item.view.type)})};setthumb.unset=function(b){b.imginfo&&b.imginfo.thumbstoreid&&bg.removeThumbstore(b.imginfo.thumbstoreid,function(){delete views[b.view.type];b.view.node.remove();showView(b.view.type)})};
var doLoadTheme=function(b){var c="Loading Theme",d=$("<div>").css({position:"fixed",left:"0",top:"0",width:"100%",height:"100%","background-color":"rgba(128,128,128,.5)",opacity:"0","z-index":"999999999999"}).appendTo("body").append($("<div>").text(c+"...").css({display:"table",margin:"20% auto 0",padding:".5em",color:"#fff","background-color":"#555","border-radius":".5em","font-size":"2em"})).animate({opacity:1},200);$("div",d).css({width:$("div",d).width(),display:"block"});var h=3,f=setInterval(function(){h=
h%3+1;var a=c;for(i=0;i<h;i++)a+=".";$("div",d).text(a)},500);bg.loadTheme(b,function(){c="Loading Background";$("div",d).text(c+"...").css({width:"",display:"table"});$("div",d).css({width:$("div",d).width(),display:"block"})},function(){refreshTheme();d.animate({opacity:0},200,function(){clearInterval(f);d.remove()})})},options=$("<div id=options class=popover>").appendTo("body").append($("<div class=page>").append($("<div class=close>").text("close").click(function(){options.animate({opacity:0},
200,function(){$(this).css({display:"none"})})})).append($("<div class=title>").text("Options")));$(".page",options).append($("<div class=subtitle>").text("Import Custom Theme")).append($("<div class=descrip>").text("Download the .crx file for the theme of your choice or provide a URL. The background and colors of the theme will be loaded into this new tab page."));
window.FileReader&&$(".page",options).append($("<div class=filespoof id=import>").append($("<input type=file>").change(function(){var b=this;if(!(this.files.length<=0)){var c=$(b).val().substr($(b).val().lastIndexOf(".")+1);if(!(c!="zip"&&c!="crx")){var d=new FileReader;d.onload=function(){b.value="";options.animate({opacity:0},200,function(){$(this).css({display:"none"})});doLoadTheme({binaryString:d.result})};d.readAsBinaryString(this.files[0])}}})).append($("<input type=button>").attr("tabindex",
-1).val("Load Theme from hard drive (.crx)"))).append("<div class=clear style='text-align:center;color:#CCC;font-size:.8em;'>or</div>");
$(".page",options).append($("<input type=text id=download>").attr("placeholder","Load Theme URL").keyup(function(){var b=null,c=$(this).val().match(/([^a-p]|^)([a-p]{32})([^a-p]|$)/);if(c&&c[2])b="https://clients2.google.com/service/update2/crx?response=redirect&x=uc%26id%3D"+c[2];if($(this).val().match(/\.crx$|google.com\/.+\/crx/))b=$(this).val();if(b){$(this).val("");options.animate({opacity:0},200,function(){$(this).css({display:"none"})});doLoadTheme({url:b})}})).append("<div class=clear style='height:.3em'>").append($("<div class='themelink'>").css({"margin-right":"1.5em"}).append($("<a class=theme>").text("Blank").click(function(){bg.clearTheme();
refreshTheme();options.animate({opacity:0},200,function(){$(this).css({display:"none"})})})));
var themes={Space:"hdmjogfllcoajjflloeiaoaplmohkcdf",Cloud:"bjgddfhochneogcjblfijidkjjceolgb",Voyage:"ddgmdidminnkiajaonminefjlllglgap",Robot:"oeljdmeofcikjblcoehpmdnooimalbmj","Rain Drops":"fibbldnbbceipdbllefcjaocmochkegg",R2D2:"ahcijhhojfefnmpagabibhpkgjgmdlgp",Wood:"mhepbfioblgelmnboacpblnkpiafcgki","Hedgehog Fog":{site:"https://tools.google.com/chrome/intl/en/themes/theme_at_hedgehoginthefog.html",crx:"https://dl-ssl.google.com/chrome/extensions/at_hedgehoginthefog_v2.crx"},Mesh:{site:"https://tools.google.com/chrome/intl/en/themes/theme_at_karimrashid.html",
crx:"https://dl-ssl.google.com/chrome/extensions/at_karimrashidv3.crx"},"Dark Colors":{site:"https://tools.google.com/chrome/intl/en/themes/theme_at_jameswhite.html",crx:"https://dl-ssl.google.com/chrome/extensions/at_jameswhite.crx"},Porche:{site:"https://tools.google.com/chrome/intl/en/themes/theme_at_porsche.html",crx:"https://dl-ssl.google.com/chrome/extensions/at_porsche.crx"},Cork:{site:"https://tools.google.com/chrome/intl/en/themes/theme_corkboard.html",crx:"https://dl-ssl.google.com/chrome/extensions/CorkBoard.crx"}};
$.each(themes,function(b,c){if(typeof c=="string")c={site:"https://chrome.google.com/webstore/detail/"+c,crx:"https://clients2.google.com/service/update2/crx?response=redirect&x=uc%26id%3D"+c};$(".page",options).append($("<div class=themelink>").append($("<a class=theme>").text(b).click(function(){doLoadTheme({url:c.crx});options.animate({opacity:0},200,function(){$(this).css({display:"none"})})})).append("<a class=extsite href='"+c.site+"' target='_blank'>&#x2197;</a>"))});$(".page",options).append("<div class=clear>");
$(".page",options).append($("<div class=subtitle>").text("Automatically Update Images")).append($("<select>").css({"float":"right"}).append($("<option>").text("On").val(1)).append($("<option>").text("Off").val(0)).val(bg.ls("updatethumbs")?1:0).change(function(){bg.ls("updatethumbs",$(this).val()==1)})).append($("<div class=descrip>").text("Disable this feature if it makes your computer too slow."));
options.show=function(){options.css({display:"block",opacity:"0"}).animate({opacity:1},200);$(".page",options).animate({height:"hide"},0).animate({height:"show"},200)};$("body").append($("<a id=optionsbutton>").text("Options").click(function(){options.show()}));var contextmenu=$("<div id=contextmenu>").appendTo("body"),layoutbar=$("<div id=layoutbar class=togglerow>").appendTo("body"),toggles={};
toggles.gridindex=$("<a id=gridindexlayout class=layout>").attr("selected",ls(ls("view")+"-layout")=="grid"&&ls(ls("view")+"-sort")=="index").click(function(){if(!(ls(ls("view")+"-layout")=="grid"&&ls(ls("view")+"-sort")=="index")){ls(ls("view")+"-layout","grid");ls(ls("view")+"-sort","index");views[ls("view")].setLayout("grid");views[ls("view")].sort("index");views[ls("view")].layoutUpdate();for(layout in toggles)toggles[layout].attr("selected",layout=="gridindex")}}).append("<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAAAXNSR0IArs4c6QAAAAZiS0dEAIgAiACIdJABBgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oHCxU2AImhPhYAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAKUlEQVQoz2Ps6Oj4z4AHVFRUMDIwMDAQUsfEQCUwatBQBIyj6WgIGgQAfR4NRWplEr0AAAAASUVORK5CYII='>").appendTo(["apps",
"tabs","speeddial"].indexOf(ls("view"))!=-1?layoutbar:"body");
toggles.gridtime=$("<a id=gridtimelayout class=layout>").attr("selected",ls(ls("view")+"-layout")=="grid"&&ls(ls("view")+"-sort")=="time").click(function(){if(!(ls(ls("view")+"-layout")=="grid"&&ls(ls("view")+"-sort")=="time")){ls(ls("view")+"-layout","grid");ls(ls("view")+"-sort","time");views[ls("view")].setLayout("grid");views[ls("view")].sort("time");views[ls("view")].layoutUpdate();for(layout in toggles)toggles[layout].attr("selected",layout=="gridtime")}}).append("<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAAAXNSR0IArs4c6QAAAAZiS0dEAIgAiACIdJABBgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oHCxU2AImhPhYAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAKUlEQVQoz2Ps6Oj4z4AHVFRUMDIwMDAQUsfEQCUwatBQBIyj6WgIGgQAfR4NRWplEr0AAAAASUVORK5CYII='>").appendTo(["bookmarks",
"history"].indexOf(ls("view"))!=-1?layoutbar:"body");
toggles.listindex=$("<a id=listindexlayout class=layout>").attr("selected",ls(ls("view")+"-layout")=="list"&&ls(ls("view")+"-sort")=="index").click(function(){if(!(ls(ls("view")+"-layout")=="list"&&ls(ls("view")+"-sort")=="index")){ls(ls("view")+"-layout","list");ls(ls("view")+"-sort","index");views[ls("view")].setLayout("list");views[ls("view")].sort("index");views[ls("view")].layoutUpdate();for(layout in toggles)toggles[layout].attr("selected",layout=="listindex")}}).append("<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAAAXNSR0IArs4c6QAAAAZiS0dEAMYAxgDGeDMrcwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oHCxU5GB1Vuo8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAIUlEQVQoz2Ps6Oj4z0AFwMRAJUA1gwYfYBwN7NHAHkwAAAGYB9Woux9IAAAAAElFTkSuQmCC'>").appendTo(["apps",
"tabs"].indexOf(ls("view"))!=-1?layoutbar:"body");
toggles.listtime=$("<a id=listtimelayout class=layout>").attr("selected",ls(ls("view")+"-layout")=="list"&&ls(ls("view")+"-sort")=="time").click(function(){if(!(ls(ls("view")+"-layout")=="list"&&ls(ls("view")+"-sort")=="time")){ls(ls("view")+"-layout","list");ls(ls("view")+"-sort","time");views[ls("view")].setLayout("list");views[ls("view")].sort("time");views[ls("view")].layoutUpdate();for(layout in toggles)toggles[layout].attr("selected",layout=="listtime")}}).append("<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAAAXNSR0IArs4c6QAAAAZiS0dEAMYAxgDGeDMrcwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oHCxU5GB1Vuo8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAIUlEQVQoz2Ps6Oj4z0AFwMRAJUA1gwYfYBwN7NHAHkwAAAGYB9Woux9IAAAAAElFTkSuQmCC'>").appendTo(["bookmarks",
"history"].indexOf(ls("view"))!=-1?layoutbar:"body");
toggles.tree=$("<a id=treelayout class=layout>").attr("selected",ls(ls("view")+"-layout")=="tree").click(function(){if(ls(ls("view")+"-layout")!="tree"){ls(ls("view")+"-layout","tree");views[ls("view")].setLayout("tree");views[ls("view")].layoutUpdate();for(layout in toggles)toggles[layout].attr("selected",layout=="tree")}}).append("<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAAAXNSR0IArs4c6QAAAAZiS0dEAMYAxgDGeDMrcwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oHCxU5GB1Vuo8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAIUlEQVQoz2Ps6Oj4z0AFwMRAJUA1gwYfYBwN7NHAHkwAAAGYB9Woux9IAAAAAElFTkSuQmCC'>").appendTo([].indexOf(ls("view"))!=-1?
layoutbar:"body");var viewtypes={apps:"Apps",tabs:"Tabs",bookmarks:"Bookmarks",history:"History",speeddial:"Speeddial"},titlebar=$("<ul id=titlebar>").appendTo("body");
for(type in viewtypes)titlebar.append($("<li>").attr("id",type+"title").text(viewtypes[type]).attr("selected",ls("view")==type).click(function(b){return function(){if(ls("view")!=b){$("#"+ls("view")+"view").animate({opacity:0},200,function(){$(this).css({display:"none"})});ls("view",b);showView(b);$("#titlebar li").attr("selected",false);$(this).attr("selected",true);for(layout in toggles)toggles[layout].attr("selected",!!layout.match(RegExp(ls(ls("view")+"-layout")))&&!!layout.match(RegExp(ls(ls("view")+
"-sort")))).appendTo("body");["apps","tabs","speeddial"].indexOf(ls("view"))!=-1&&toggles.gridindex.appendTo(layoutbar);["bookmarks","history"].indexOf(ls("view"))!=-1&&toggles.gridtime.appendTo(layoutbar);["apps","tabs"].indexOf(ls("view"))!=-1&&toggles.listindex.appendTo(layoutbar);["bookmarks","history"].indexOf(ls("view"))!=-1&&toggles.listtime.appendTo(layoutbar);[].indexOf(ls("view"))!=-1&&toggles.tree.appendTo(layoutbar)}}}(type)));var tabId=null,winId=null,views={};
chrome.extension.sendRequest({getself:true},function(b){tabId=b.tab.id;winId=b.tab.windowId;Item.width=250;Item.border=4;Item.imgWidth=Item.width-Item.border*2;b=window.innerHeight/window.innerWidth;Item.imgHeight=Math.round((b>0.5?b:0.5)*Item.imgWidth*0.95);Item.height=Item.imgHeight+Item.border*2+20;showView(ls("view"))});
var showView=function(b){if(views[b])views[b].layoutUpdate();else{views[b]=new View(b,ls(b+"-layout"));views[b].populate(function(){views[b].sort(ls(b+"-sort"));views[b].layoutUpdate()})}},View=function(b,c){this.type=b;this.node=$("<div>").attr("id",b+"view").css({display:"none"}).appendTo("body");this.setLayout(c)};View.prototype.populate=function(b){var c=this;Item.getAll(this.type,function(d){c.items=d;for(var h=0;h<d.length;h++){d[h].view=c;c.node.append(d[h].elem);c.node.append(d[h].note)}b()})};
View.prototype.sort=function(b){if(this.items){if(b=="domain")this.items.sort(function(c,d){c=(c.url.match(/:\/\/([^\/]*)\//)[1]||"").replace(/[^a-zA-Z.]*/,"").toLowerCase();d=(d.url.match(/:\/\/([^\/]*)\//)[1]||"").toLowerCase();return c<d?-1:c==d?0:1});else if(b=="title")this.items.sort(function(c,d){c=c.title.replace(/[^a-zA-Z ]*/,"").toLowerCase();d=d.title.replace(/[^a-zA-Z ]*/,"").toLowerCase();return c<d?-1:c==d?0:1});else b=="index"&&this.items.sort(function(c,d){if(c.index==undefined)return-1;
return c.index<d.index?-1:c.index==d.index?0:1});b=="time"&&this.items.sort(function(c,d){if(c.time==undefined)return-1;return c.time>d.time?-1:c.time==d.time?0:1})}};View.prototype.setLayout=function(b){this.layoutUpdate=this.layout[b].update;this.layoutIndex=this.layout[b].index};View.prototype.layout={};View.prototype.layout.grid={};
View.prototype.layout.grid.update=function(){if(this.items){for(var b=0;b<this.items.length;b++)this.items[b].draggable=ls(this.type+"-sort")=="index";var c=this.node.css("display")!="none";c||this.node.css({display:"block",opacity:"0"}).animate({opacity:1},300);$(".item:not([showthumb=true]) .thumbborder",this.node).animate({height:"show",opacity:1},300);$(".item",this.node).attr("showthumb","true");var d=Math.round(Math.sqrt(this.items.length)+1),h=Item.width*d+40*(d-1),f=window.innerWidth/h*0.8;
f=f<1?f:1;this.layoutLeft=Math.floor((window.innerWidth-h*f)/2);this.layoutTop=120;titlebar.css("display")!="none"?titlebar.animate({left:this.layoutLeft},{duration:300,queue:false}):titlebar.css({display:"block",left:this.layoutLeft});for(b=0;b<this.items.length;b++)if(!this.items[b].dragging){var a=Math.floor(this.layoutLeft+b%d*Item.width*1.2*f),e=Math.floor(this.layoutTop+Math.floor(b/d)*Item.height*1.2*f);this.items[b].elem.css({width:this.items[b].elem.width(),display:"block"});$(".thumbborder",
this.items[b].elem).css({zoom:f});this.items[b].elem.animate({width:Item.width*f,left:a,top:e},{duration:c?300:0,queue:false});this.items[b].note.css({display:"none"})}this.layoutCols=d;this.layoutWidth=h;this.layoutZoom=f}};
View.prototype.layout.grid.index=function(b){for(var c=0;c<this.layoutCols-1;c++)if(b.x<this.layoutLeft+(c+0.5)*Item.width*1.2*this.layoutZoom)break;for(var d=0;d<Math.ceil(this.items.length/this.layoutCols)-1;d++)if(b.y<this.layoutTop+(d+0.5)*Item.height*1.2*this.layoutZoom)break;return c+d*this.layoutCols<this.items.length?c+d*this.layoutCols:this.items.length-1};View.prototype.layout.list={};
View.prototype.layout.list.update=function(){var b=this;if(this.items){for(var c=0;c<this.items.length;c++)this.items[c].draggable=ls(this.type+"-sort")=="index";var d=this.node.css("display")!="none";d||this.node.css({display:"block",opacity:"0"}).animate({opacity:1},300);$(".item:not([showthumb=false])",this.node).each(function(){if(b.items.length>36){$(".thumbborder",this).css({display:"none"});$(this).css({width:"auto",display:"table"})}else{$(".thumbborder",this).animate({height:"hide",opacity:0},
d?300:0,function(){$(this).animate({height:"show",opacity:1},0).css({display:"none"})});$(this).animate({width:$(".title",this).width()+27},d?300:0,function(){$(this).css({width:"auto",display:"table"})})}}).attr("showthumb","false");this.layoutLeft=Math.floor(Math.max((window.innerWidth-650)/2,10));this.layoutTop=120;titlebar.css("display")!="none"?titlebar.animate({left:this.layoutLeft},{duration:300,queue:false}):titlebar.css({display:"block",left:this.layoutLeft});var h=null;for(c=0;c<this.items.length;c++)if(!this.items[c].dragging){var f=
Math.floor(this.layoutLeft),a=Math.floor(this.layoutTop+c*($(".info",this.items[c].elem).height()+4));this.items[c].elem.children().css({zoom:1});this.items.length>36?this.items[c].elem.css({left:f,top:a}):this.items[c].elem.animate({left:f,top:a},{duration:d?300:0,queue:false});if(ls(ls("view")+"-sort")=="time"){var e=new Date(this.items[c].time),g="";if((new Date).getTime()-(new Date(this.items[this.items.length-1].time)).getTime()<36E5){if(!h||Math.floor(h.getTime()/1E3/60/5)!=Math.floor(e.getTime()/
1E3/60/5))g=(e.getHours()+11)%12+1+":"+(e.getMinutes()<10?"0":"")+Math.floor(e.getMinutes()/5)*5+(e.getHours()>11?"p":"a")}else if((new Date).getTime()-(new Date(this.items[this.items.length-1].time)).getTime()<864E5){if(!h||Math.floor(h.getTime()/1E3/60/60)!=Math.floor(e.getTime()/1E3/60/60))g=(e.getHours()+11)%12+1+":00"+(e.getHours()>11?"p":"a")}else{if(!h||Math.floor(h.getTime()/1E3/60/60/24)!=Math.floor(e.getTime()/1E3/60/60/24))g=e.toDateString();if(g==(new Date).toDateString())g="Today";if((new Date).getTime()-
(new Date(this.items[this.items.length-1].time)).getTime()<31536E6)g=g.replace(/ [0-9]{4}/,"")}h=e;this.items[c].note.text(g).css({display:"",left:f-this.items[c].note.width()-10,top:a+2})}else this.items[c].note.css({display:"none"})}}};View.prototype.layout.list.index=function(b){for(var c=0;c<this.items.length-1;c++)if(b.y<this.layoutTop+(c+0.5)*($(".info",this.items[c].elem).height()+4))break;return c};View.prototype.layout.tree={};
View.prototype.layout.tree.update=function(){var b=this;if(this.items){for(var c=0;c<this.items.length;c++)this.items[c].draggable=ls(this.type+"-sort")=="index";var d=this.node.css("display")!="none";d||this.node.css({display:"block",opacity:"0"}).animate({opacity:1},300);$(".item:not([showthumb=false])",this.node).each(function(){if(b.items.length>36){$(".thumbborder",this).css({height:"hide",opacity:0});$(this).css({width:"auto",display:"table"})}else{$(".thumbborder",this).animate({height:"hide",
opacity:0},d?300:0);$(this).animate({width:$(".title",this).width()+27},d?300:0,function(){$(this).css({width:"auto",display:"table"})})}}).attr("showthumb","false");this.layoutLeft=Math.floor(Math.max((window.innerWidth-650)/2,10));this.layoutTop=120;titlebar.css("display")!="none"?titlebar.animate({left:this.layoutLeft},{duration:300,queue:false}):titlebar.css({display:"block",left:this.layoutLeft});for(c=0;c<this.items.length;c++)if(!this.items[c].dragging){var h=Math.floor(this.layoutLeft),f=
Math.floor(this.layoutTop+c*($(".info",this.items[c].elem).height()+4));this.items[c].elem.children().css({zoom:1});this.items.length>36?this.items[c].elem.css({left:h,top:f}):this.items[c].elem.animate({left:h,top:f},{duration:d?300:0,queue:false});this.items[c].note.css({display:"none"})}}};View.prototype.layout.tree.index=function(b){for(var c=0;c<this.items.length-1;c++)if(b.y<this.layoutTop+(c+0.5)*($(".info",this.items[c].elem).height()+4))break;return c};
var Item=function(b,c,d,h,f){var a=this;a.id=Math.floor(Math.random()*1E8);a.title=b;a.url=c;for(p in d)a[p]=d[p];a.click=function(){h(a)};a.swapped=f?function(j){f(a,j)}:function(){};var e=$("<img class=thumb>").width(Item.imgWidth),g=function(){bg.getImage(a,function(j,n){a.imginfo=n;e.load(function(){if(a.imginfo.icon){var m=Math.min(Item.imgHeight,128);e.width(m).css({top:(Item.imgHeight-m)/2,left:(Item.imgWidth-m)/2})}else if(a.imginfo.favicon){m=Math.min(Item.imgHeight,64);e.width(m).css({top:(Item.imgHeight-
m)/2,left:(Item.imgWidth-m)/2})}else{m=(Item.imgHeight-e[0].height/e[0].width*Item.imgWidth)/2;e.css({top:m>0||m<-25?m:0})}});j&&e.attr("src",j).css({opacity:"1"})})};g();a.note=$("<div class=itemnote>");a.elem=$("<a class=item>").attr("id","item-"+a.id).attr("title",a.title).css({width:Item.width+"px"}).append($("<div class=thumbborder>").css({width:Item.imgWidth+"px",height:Item.imgHeight+"px","border-width":Item.border-1+"px",padding:"1px 1px 0 1px"}).append($("<div class=thumbgradient>").css({width:Item.imgWidth+
2+"px",height:Item.imgHeight+"px","margin-left":"-1px"})).append(e)).append($("<div class=info>").append($("<img class=favicon>").attr("src",a.icon?a.icon:"chrome://favicon/"+a.url)).append($("<span class=title>").text(a.title)));a.tabid||a.elem.attr("href",a.url);a.elem.click(function(j){j.stopPropagation();j.preventDefault()});a.elem.mousedown(function(j){if(j.button==0){j.stopPropagation();j.preventDefault();if(a.view)if(a.draggable){a.dragging=false;a.mouse={x:j.clientX,y:j.clientY};a.index=a.view.items.indexOf(a);
a.newIndex=a.index;a.elem.css({"z-index":"1001"});$(window).bind("mousemove",k);$(window).bind("mouseup",l)}}});var k=function(j){var n=j.clientX-a.mouse.x;j=j.clientY-a.mouse.y;if(!a.dragging&&(Math.abs(n)>5||Math.abs(j)>5))a.dragging={x:parseInt(a.elem.css("left")),y:parseInt(a.elem.css("top")),placeholder:$("<div class=placeholder>").css({position:"absolute",width:a.elem.width()+2,height:a.elem.height()+2,left:parseInt(a.elem.css("left"))-2,top:parseInt(a.elem.css("top"))-2,"z-index":"-1",border:"1px dashed #888",
"border-radius":"5px"}).appendTo("body")};if(a.dragging){a.elem.css({left:a.dragging.x+n,top:a.dragging.y+j});n=a.view.layoutIndex({x:a.dragging.x+n,y:a.dragging.y+j});if(n!=a.newIndex){a.swapTo(a.index);if(n!=null){a.swapTo(n);a.newIndex=n}a.view&&a.view.layoutUpdate(200)}}},l=function(){if(a.draggable){if(a.dragging){a.dragging.placeholder.animate({opacity:0},200,function(){$(a).remove()});a.dragging=false;a.swapped(a.view.items[a.index])}else a.click();a.elem.css({"z-index":"1"});$(window).unbind("mousemove",
k);$(window).unbind("mouseup",l);a.view&&a.view.layoutUpdate(200)}};a.elem.click(function(){a.draggable||a.click()});a.elem.bind("contextmenu",function(j){j.preventDefault();contextmenu.empty();a.extid&&contextmenu.append($("<div class=contextbutton>").text("Open in Pinned Tab").click(function(){m();chrome.tabs.create({url:a.url,pinned:true},function(){chrome.tabs.remove(tabId)})}));if(!a.tabid){contextmenu.append($("<div class=contextbutton>").text("Open in New Tab").click(function(){m();chrome.tabs.create({url:a.url})}));
contextmenu.append($("<div class=contextbutton>").text("Open in New Window").click(function(){m();chrome.windows.create({url:a.url})}))}if(a.extid){contextmenu.append("<div class=sep>");contextmenu.append($("<div class=contextbutton>").text("Uninstall").click(function(){m();chrome.management.uninstall(a.extid);a.view.items.splice(a.view.items.indexOf(a),1);a.view.layoutUpdate();a.elem.remove();a.note.remove()}))}if(a.view.type!="speeddial"){contextmenu.append("<div class=sep>");contextmenu.append($("<div class=contextbutton>").text("Add to Speeddial").click(function(){m();
chrome.bookmarks.create({parentId:"1",title:a.title,url:a.url},function(){views.speeddial.node.remove();delete views.speeddial;$("#speeddialtitle").click()})}))}if(ls(a.view.type+"-layout")=="grid"){contextmenu.append("<div class=sep>");if(a.imginfo&&a.imginfo.thumbstoreid)contextmenu.append($("<div class=contextbutton>").text("Unpin Thumbnail").click(function(){m();setthumb.unset(a)}));else{contextmenu.append($("<div class=contextbutton>").text("Choose Thumbnail").click(function(){m();setthumb.show(a)}));
a.imginfo&&a.imginfo.thumbsid&&contextmenu.append($("<div class=contextbutton>").text("Delete Thumbnail").click(function(){m();bg.db&&bg.db.transaction(function(o){o.executeSql("DELETE FROM thumbs WHERE id = ?",[a.imginfo.thumbsid]);a.imginfo={}});g()}))}}if(a.bmkid){contextmenu.append("<div class=sep>");contextmenu.append($("<div class=contextbutton>").text("Edit Bookmark").click(function(){m();editbookmark.show(a)}));a.view.type=="speeddial"&&contextmenu.append($("<div class=contextbutton>").text("Archive").click(function(){m();
chrome.bookmarks.getTree(function(o){chrome.bookmarks.move(a.bmkid,{parentId:o[0].children[1].id})});a.view.items.splice(a.view.items.indexOf(a),1);a.view.layoutUpdate();a.elem.remove();a.note.remove()}));contextmenu.append($("<div class=contextbutton>").text("Delete").click(function(){m();if(confirm("Are you sure that you want to delete this bookmark?")){chrome.bookmarks.remove(a.bmkid);a.view.items.splice(a.view.items.indexOf(a),1);a.view.layoutUpdate();a.elem.remove();a.note.remove()}}))}if(a.histid){contextmenu.append("<div class=sep>");
contextmenu.append($("<div class=contextbutton>").text("Delete").click(function(){m();chrome.history.deleteUrl({url:a.url});a.view.items.splice(a.view.items.indexOf(a),1);a.view.layoutUpdate();a.elem.remove();a.note.remove()}))}contextmenu.css({left:j.clientX-1,top:j.clientY-4,display:"block"});var n=$("<div>").css({position:"fixed",left:0,top:0,width:"100%",height:"100%","z-index":"9999"}).appendTo("body"),m=function(){n.remove();contextmenu.css({display:"none"})};n.mousedown(m)})};
Item.prototype.moveTo=function(b){if(this.view){this.view.items.splice(this.view.items.indexOf(this),1);this.view.items.splice(b,0,this)}};Item.prototype.swapTo=function(b){if(this.view){var c=this.view.items.indexOf(this),d=this.view.items[c];this.view.items[c]=this.view.items[b];this.view.items[b]=d}};
Item.getAll=function(b,c){if(b=="apps"){var d=[];chrome.management.getAll(function(f){f.push({name:"Chrome Webstore",appLaunchUrl:"https://chrome.google.com/webstore",icons:[{size:128,url:"data:image/png;base64,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"}],isApp:true});
for(var a=0;a<f.length;a++){var e=f[a];if(e.isApp){for(var g=undefined,k=0;e.icons&&k<e.icons.length;k++)if(e.icons[k].size==128)g=e.icons[k].url;d.push(new Item(e.name,e.appLaunchUrl,{extid:e.id,icon:g,index:a},function(l){chrome.tabs.update(tabId,{url:l.url})},function(){}))}}c(d)})}else if(b=="tabs"){d=[];for(id in bg.activeTabs){var h=bg.activeTabs[id];h.id!=tabId&&h.windowId==winId&&d.push(new Item(h.title,h.url,{tabid:h.id,windowid:h.windowId,index:h.index},function(f){chrome.tabs.update(f.tabid,
{selected:true},function(){chrome.tabs.remove(tabId)})},function(f,a){var e=f.view.items.indexOf(f),g=a.view.items.indexOf(a);f.index=e;a.index=g;chrome.tabs.move(f.tabid,{index:e});chrome.tabs.move(a.tabid,{index:g})}))}c(d)}else if(b=="bookmarks")chrome.bookmarks.getTree(function(f){var a=[];a.bmktree=f[0].children[1];a.getroot=function(){if(a.root)return a.root;a.root=a.children(a.bmktree);return a.root};a.children=function(e){if(!e.children)return null;if(e.children.length==0||e.children[0].bmkid||
e.children[0].bmkfolderid)return e.children;var g=e.children;e.children=[];for(var k=0;k<g.length;k++){for(var l=g[k],j=0;j<a.length;j++)if(a[j].bmkid==l.id){a.splice(j,1);break}l=l.children?new Item(l.title,"",{bmkfolderid:l.id,index:l.index,time:l.dateAdded,parent:e,children:l.children}):new Item(l.title,l.url,{bmkid:l.id,index:l.index,time:l.dateAdded,parent:e},function(n){chrome.tabs.update(tabId,{url:n.url})});a.push(l);e.children.push(l)}return e.children};chrome.bookmarks.getRecent(20,function(e){for(var g=
0;g<e.length;g++){var k=e[g];if(k.parentId!=1)k.title.match(/^smoothgestures-/)||k.url&&a.push(new Item(k.title,k.url,{bmkid:k.id,index:k.index,time:k.dateAdded},function(l){chrome.tabs.update(tabId,{url:l.url})}))}c(a)})});else if(b=="history")chrome.history.search({text:"",maxResults:20},function(f){for(var a=[],e=0;e<f.length;e++){var g=f[e];a.push(new Item(g.title,g.url,{histid:g.id,histcount:g.visitCount,time:g.lastVisitTime},function(k){chrome.tabs.update(tabId,{url:k.url})}))}c(a)});else b==
"speeddial"&&chrome.bookmarks.getTree(function(f){var a=f[0].children[0];f=[];for(var e=0;e<a.children.length;e++){var g=a.children[e];g.url&&f.push(new Item(g.title,g.url,{bmkid:g.id,index:g.index,time:g.dateAdded},function(k){chrome.tabs.update(tabId,{url:k.url})},function(k,l){var j=k.view.items.indexOf(k),n=l.view.items.indexOf(l);k.index=j;l.index=n;chrome.bookmarks.move(k.bmkid,{parentId:a.id,index:j});chrome.bookmarks.move(l.bmkid,{parentId:a.id,index:n})}))}c(f)})};resize=null;
window.addEventListener("resize",function(){if(views[ls("view")])if(resize){clearTimeout(resize);resize=setTimeout(function(){views[ls("view")].layoutUpdate();resize=null},500)}else{resize=setTimeout(function(){resize=null},500);views[ls("view")].layoutUpdate()}},true);
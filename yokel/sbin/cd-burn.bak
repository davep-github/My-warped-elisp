#!/usr/bin/env bash
set -x

echo "PATH>$PATH<"
# needed on Linux when called from my account with sudo,e.g.:
#  sudo cd-burn
# for some reason, some of env isn't passed.
# ??? path changed in roots .bashrc?
PATH="/usr/yokel/sbin:/usr/yokel/bin:$HOME/bin:$PATH"
echo "PATH>$PATH<"
echo $HOME

[ -z "$HOST_INFO" ] && {
    rcfile="$HOME/.bashrc"
    [ -f $rcfile ] && . $rcfile
}

. eexec 
EExecEcho=echo

# simple front end to provide all of the params to cdrecord

dummy=
option_str='nd:s:D'

# get defaults...
. cdrw.conf

args=` getopt $option_str $* `

[ $? != 0 ] && Usage

set -- $args
for i in $*
do
    case $1 in
	-n) EExecDashN;;
	-d) dev=$2; shift;;
	-D) dummy='-dummy';;
	-s) speed=$2; shift;;
	--) shift ; break ;;
	*) 
	    echo 1>&2 "Unsupported option>$1<";
	    exit 1 ;;
    esac
    shift
done

EExec cdrecord -v $dummy $multi $data fs=$fs speed=$speed dev="$dev" "$@"
